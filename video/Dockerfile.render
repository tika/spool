FROM node:22-bookworm-slim

RUN apt-get update \
    && apt-get install -y chromium --no-install-recommends \
    && rm -rf /var/lib/apt/lists/*

ENV PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium

WORKDIR /app

# Copy package files
COPY package.json ./

# Install dependencies (use npm if no bun)
RUN npm install

# Copy video project source
COPY src/ ./src/
COPY tsconfig.json* ./
